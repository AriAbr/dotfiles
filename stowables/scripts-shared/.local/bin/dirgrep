#!/bin/bash

# List of ignored directories
ignored_directories=(
    .venv
    .pytest_cache
    .node_modules
)

# Check for correct usage
if [ $# -ne 1 ]; then
    echo "Usage: $0 <search_pattern>"
    exit 1
fi

# Store the search pattern
search_pattern="$1"

# Generate the find command with ignored directories
find_command="find ."
for dir in "${ignored_directories[@]}"; do
    find_command+=" -type d -name '$dir' -prune -o"
done
find_command+=" -type f -exec grep --color=auto -nH '$search_pattern' {} +"

# Perform the search using find and grep
eval "$find_command"
